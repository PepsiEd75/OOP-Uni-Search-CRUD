"use strict";
var _rebuild = require("@electron/rebuild");
if (!process.send) {
    console.error('The remote rebuilder expects to be spawned with an IPC channel');
    // eslint-disable-next-line no-process-exit
    process.exit(1);
}
const options = JSON.parse(process.argv[2]);
const rebuilder = (0, _rebuild).rebuild(options);
rebuilder.lifecycle.on('module-found', ()=>process.send({
        msg: 'module-found'
    })
);
rebuilder.lifecycle.on('module-done', ()=>process.send({
        msg: 'module-done'
    })
);
rebuilder.then(()=>{
    process.send({
        msg: 'rebuild-done'
    });
    // eslint-disable-next-line no-process-exit
    return process.exit(0);
}).catch((err)=>{
    process.send({
        msg: 'rebuild-error',
        err: {
            message: err.message,
            stack: err.stack
        }
    });
    // eslint-disable-next-line no-process-exit
    process.exit(0);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW1vdGUtcmVidWlsZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWJ1aWxkLCBSZWJ1aWxkT3B0aW9ucyB9IGZyb20gJ0BlbGVjdHJvbi9yZWJ1aWxkJztcblxuaWYgKCFwcm9jZXNzLnNlbmQpIHtcbiAgY29uc29sZS5lcnJvcignVGhlIHJlbW90ZSByZWJ1aWxkZXIgZXhwZWN0cyB0byBiZSBzcGF3bmVkIHdpdGggYW4gSVBDIGNoYW5uZWwnKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZXhpdFxuICBwcm9jZXNzLmV4aXQoMSk7XG59XG5cbmNvbnN0IG9wdGlvbnM6IFJlYnVpbGRPcHRpb25zID0gSlNPTi5wYXJzZShwcm9jZXNzLmFyZ3ZbMl0pO1xuXG5jb25zdCByZWJ1aWxkZXIgPSByZWJ1aWxkKG9wdGlvbnMpO1xuXG5yZWJ1aWxkZXIubGlmZWN5Y2xlLm9uKCdtb2R1bGUtZm91bmQnLCAoKSA9PiBwcm9jZXNzLnNlbmQhKHsgbXNnOiAnbW9kdWxlLWZvdW5kJyB9KSk7XG5yZWJ1aWxkZXIubGlmZWN5Y2xlLm9uKCdtb2R1bGUtZG9uZScsICgpID0+IHByb2Nlc3Muc2VuZCEoeyBtc2c6ICdtb2R1bGUtZG9uZScgfSkpO1xuXG5yZWJ1aWxkZXJcbiAgLnRoZW4oKCkgPT4ge1xuICAgIHByb2Nlc3Muc2VuZCEoeyBtc2c6ICdyZWJ1aWxkLWRvbmUnIH0pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICByZXR1cm4gcHJvY2Vzcy5leGl0KDApO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIHByb2Nlc3Muc2VuZCEoe1xuICAgICAgbXNnOiAncmVidWlsZC1lcnJvcicsXG4gICAgICBlcnI6IHtcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgICB9LFxuICAgIH0pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm9jZXNzLWV4aXRcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xuIl0sIm5hbWVzIjpbInByb2Nlc3MiLCJzZW5kIiwiY29uc29sZSIsImVycm9yIiwiZXhpdCIsIm9wdGlvbnMiLCJKU09OIiwicGFyc2UiLCJhcmd2IiwicmVidWlsZGVyIiwicmVidWlsZCIsImxpZmVjeWNsZSIsIm9uIiwibXNnIiwidGhlbiIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsInN0YWNrIl0sIm1hcHBpbmdzIjoiO0FBQXdDLEdBQW1CLENBQW5CLFFBQW1CO0FBRTNELEVBQUUsR0FBR0EsT0FBTyxDQUFDQyxJQUFJLEVBQUUsQ0FBQztJQUNsQkMsT0FBTyxDQUFDQyxLQUFLLENBQUMsQ0FBZ0U7SUFDOUUsRUFBMkMsQUFBM0MseUNBQTJDO0lBQzNDSCxPQUFPLENBQUNJLElBQUksQ0FBQyxDQUFDO0FBQ2hCLENBQUM7QUFFRCxLQUFLLENBQUNDLE9BQU8sR0FBbUJDLElBQUksQ0FBQ0MsS0FBSyxDQUFDUCxPQUFPLENBQUNRLElBQUksQ0FBQyxDQUFDO0FBRXpELEtBQUssQ0FBQ0MsU0FBUyxPQUFHQyxRQUFPLFVBQUNMLE9BQU87QUFFakNJLFNBQVMsQ0FBQ0UsU0FBUyxDQUFDQyxFQUFFLENBQUMsQ0FBYyxtQkFBUVosT0FBTyxDQUFDQyxJQUFJLENBQUUsQ0FBQztRQUFDWSxHQUFHLEVBQUUsQ0FBYztJQUFDLENBQUM7O0FBQ2xGSixTQUFTLENBQUNFLFNBQVMsQ0FBQ0MsRUFBRSxDQUFDLENBQWEsa0JBQVFaLE9BQU8sQ0FBQ0MsSUFBSSxDQUFFLENBQUM7UUFBQ1ksR0FBRyxFQUFFLENBQWE7SUFBQyxDQUFDOztBQUVoRkosU0FBUyxDQUNOSyxJQUFJLEtBQU8sQ0FBQztJQUNYZCxPQUFPLENBQUNDLElBQUksQ0FBRSxDQUFDO1FBQUNZLEdBQUcsRUFBRSxDQUFjO0lBQUMsQ0FBQztJQUNyQyxFQUEyQyxBQUEzQyx5Q0FBMkM7SUFDM0MsTUFBTSxDQUFDYixPQUFPLENBQUNJLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLENBQUMsRUFDQVcsS0FBSyxFQUFFQyxHQUFHLEdBQUssQ0FBQztJQUNmaEIsT0FBTyxDQUFDQyxJQUFJLENBQUUsQ0FBQztRQUNiWSxHQUFHLEVBQUUsQ0FBZTtRQUNwQkcsR0FBRyxFQUFFLENBQUM7WUFDSkMsT0FBTyxFQUFFRCxHQUFHLENBQUNDLE9BQU87WUFDcEJDLEtBQUssRUFBRUYsR0FBRyxDQUFDRSxLQUFLO1FBQ2xCLENBQUM7SUFDSCxDQUFDO0lBQ0QsRUFBMkMsQUFBM0MseUNBQTJDO0lBQzNDbEIsT0FBTyxDQUFDSSxJQUFJLENBQUMsQ0FBQztBQUNoQixDQUFDIn0=