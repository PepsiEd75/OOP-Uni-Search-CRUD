"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.findTemplate = void 0;
var _debug = _interopRequireDefault(require("debug"));
var _resolvePackage = _interopRequireDefault(require("resolve-package"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const d = (0, _debug).default('electron-forge:init:find-template');
const findTemplate = async (dir, template)=>{
    let templateModulePath;
    const resolveTemplateTypes = [
        [
            'global',
            `electron-forge-template-${template}`
        ],
        [
            'global',
            `@electron-forge/template-${template}`
        ],
        [
            'local',
            `electron-forge-template-${template}`
        ],
        [
            'local',
            `@electron-forge/template-${template}`
        ],
        [
            'local',
            template
        ], 
    ];
    let foundTemplate = false;
    for (const [templateType, moduleName] of resolveTemplateTypes){
        try {
            d(`Trying ${templateType} template: ${moduleName}`);
            if (templateType === 'global') {
                templateModulePath = await (0, _resolvePackage).default(moduleName);
            } else {
                // local
                templateModulePath = require.resolve(moduleName);
            }
            foundTemplate = true;
            break;
        } catch (err) {
            d(`Error: ${err instanceof Error ? err.message : err}`);
        }
    }
    if (!foundTemplate) {
        throw new Error(`Failed to locate custom template: "${template}"\n\nTry \`npm install -g @electron-forge/template-${template}\``);
    }
    // eslint-disable-next-line @typescript-eslint/no-var-requires
    const templateModule = require(templateModulePath);
    return templateModule.default || templateModule;
};
exports.findTemplate = findTemplate;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvaW5pdC1zY3JpcHRzL2ZpbmQtdGVtcGxhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9yZ2VUZW1wbGF0ZSB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9zaGFyZWQtdHlwZXMnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCByZXNvbHZlUGFja2FnZSBmcm9tICdyZXNvbHZlLXBhY2thZ2UnO1xuXG5pbXBvcnQgeyBQb3NzaWJsZU1vZHVsZSB9IGZyb20gJy4uLy4uL3V0aWwvcmVxdWlyZS1zZWFyY2gnO1xuXG5jb25zdCBkID0gZGVidWcoJ2VsZWN0cm9uLWZvcmdlOmluaXQ6ZmluZC10ZW1wbGF0ZScpO1xuXG5leHBvcnQgY29uc3QgZmluZFRlbXBsYXRlID0gYXN5bmMgKGRpcjogc3RyaW5nLCB0ZW1wbGF0ZTogc3RyaW5nKTogUHJvbWlzZTxGb3JnZVRlbXBsYXRlPiA9PiB7XG4gIGxldCB0ZW1wbGF0ZU1vZHVsZVBhdGghOiBzdHJpbmc7XG4gIGNvbnN0IHJlc29sdmVUZW1wbGF0ZVR5cGVzID0gW1xuICAgIFsnZ2xvYmFsJywgYGVsZWN0cm9uLWZvcmdlLXRlbXBsYXRlLSR7dGVtcGxhdGV9YF0sXG4gICAgWydnbG9iYWwnLCBgQGVsZWN0cm9uLWZvcmdlL3RlbXBsYXRlLSR7dGVtcGxhdGV9YF0sXG4gICAgWydsb2NhbCcsIGBlbGVjdHJvbi1mb3JnZS10ZW1wbGF0ZS0ke3RlbXBsYXRlfWBdLFxuICAgIFsnbG9jYWwnLCBgQGVsZWN0cm9uLWZvcmdlL3RlbXBsYXRlLSR7dGVtcGxhdGV9YF0sXG4gICAgWydsb2NhbCcsIHRlbXBsYXRlXSxcbiAgXTtcbiAgbGV0IGZvdW5kVGVtcGxhdGUgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBbdGVtcGxhdGVUeXBlLCBtb2R1bGVOYW1lXSBvZiByZXNvbHZlVGVtcGxhdGVUeXBlcykge1xuICAgIHRyeSB7XG4gICAgICBkKGBUcnlpbmcgJHt0ZW1wbGF0ZVR5cGV9IHRlbXBsYXRlOiAke21vZHVsZU5hbWV9YCk7XG4gICAgICBpZiAodGVtcGxhdGVUeXBlID09PSAnZ2xvYmFsJykge1xuICAgICAgICB0ZW1wbGF0ZU1vZHVsZVBhdGggPSBhd2FpdCByZXNvbHZlUGFja2FnZShtb2R1bGVOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGxvY2FsXG4gICAgICAgIHRlbXBsYXRlTW9kdWxlUGF0aCA9IHJlcXVpcmUucmVzb2x2ZShtb2R1bGVOYW1lKTtcbiAgICAgIH1cbiAgICAgIGZvdW5kVGVtcGxhdGUgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBkKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogZXJyfWApO1xuICAgIH1cbiAgfVxuICBpZiAoIWZvdW5kVGVtcGxhdGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2NhdGUgY3VzdG9tIHRlbXBsYXRlOiBcIiR7dGVtcGxhdGV9XCJcXG5cXG5UcnkgXFxgbnBtIGluc3RhbGwgLWcgQGVsZWN0cm9uLWZvcmdlL3RlbXBsYXRlLSR7dGVtcGxhdGV9XFxgYCk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuICBjb25zdCB0ZW1wbGF0ZU1vZHVsZTogUG9zc2libGVNb2R1bGU8Rm9yZ2VUZW1wbGF0ZT4gPSByZXF1aXJlKHRlbXBsYXRlTW9kdWxlUGF0aCk7XG5cbiAgcmV0dXJuIHRlbXBsYXRlTW9kdWxlLmRlZmF1bHQgfHwgdGVtcGxhdGVNb2R1bGU7XG59O1xuIl0sIm5hbWVzIjpbImQiLCJkZWJ1ZyIsImZpbmRUZW1wbGF0ZSIsImRpciIsInRlbXBsYXRlIiwidGVtcGxhdGVNb2R1bGVQYXRoIiwicmVzb2x2ZVRlbXBsYXRlVHlwZXMiLCJmb3VuZFRlbXBsYXRlIiwidGVtcGxhdGVUeXBlIiwibW9kdWxlTmFtZSIsInJlc29sdmVQYWNrYWdlIiwicmVxdWlyZSIsInJlc29sdmUiLCJlcnIiLCJFcnJvciIsIm1lc3NhZ2UiLCJ0ZW1wbGF0ZU1vZHVsZSIsImRlZmF1bHQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ2tCLEdBQU8sQ0FBUCxNQUFPO0FBQ0UsR0FBaUIsQ0FBakIsZUFBaUI7Ozs7OztBQUk1QyxLQUFLLENBQUNBLENBQUMsT0FBR0MsTUFBSyxVQUFDLENBQW1DO0FBRTVDLEtBQUssQ0FBQ0MsWUFBWSxVQUFVQyxHQUFXLEVBQUVDLFFBQWdCLEdBQTZCLENBQUM7SUFDNUYsR0FBRyxDQUFDQyxrQkFBa0I7SUFDdEIsS0FBSyxDQUFDQyxvQkFBb0IsR0FBRyxDQUFDO1FBQzVCLENBQUM7WUFBQSxDQUFRO2FBQUcsd0JBQXdCLEVBQUVGLFFBQVE7UUFBRSxDQUFDO1FBQ2pELENBQUM7WUFBQSxDQUFRO2FBQUcseUJBQXlCLEVBQUVBLFFBQVE7UUFBRSxDQUFDO1FBQ2xELENBQUM7WUFBQSxDQUFPO2FBQUcsd0JBQXdCLEVBQUVBLFFBQVE7UUFBRSxDQUFDO1FBQ2hELENBQUM7WUFBQSxDQUFPO2FBQUcseUJBQXlCLEVBQUVBLFFBQVE7UUFBRSxDQUFDO1FBQ2pELENBQUM7WUFBQSxDQUFPO1lBQUVBLFFBQVE7UUFBQSxDQUFDO0lBQ3JCLENBQUM7SUFDRCxHQUFHLENBQUNHLGFBQWEsR0FBRyxLQUFLO0lBQ3pCLEdBQUcsRUFBRSxLQUFLLEVBQUVDLFlBQVksRUFBRUMsVUFBVSxLQUFLSCxvQkFBb0IsQ0FBRSxDQUFDO1FBQzlELEdBQUcsQ0FBQyxDQUFDO1lBQ0hOLENBQUMsRUFBRSxPQUFPLEVBQUVRLFlBQVksQ0FBQyxXQUFXLEVBQUVDLFVBQVU7WUFDaEQsRUFBRSxFQUFFRCxZQUFZLEtBQUssQ0FBUSxTQUFFLENBQUM7Z0JBQzlCSCxrQkFBa0IsR0FBRyxLQUFLLEtBQUNLLGVBQWMsVUFBQ0QsVUFBVTtZQUN0RCxDQUFDLE1BQU0sQ0FBQztnQkFDTixFQUFRLEFBQVIsTUFBUTtnQkFDUkosa0JBQWtCLEdBQUdNLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDSCxVQUFVO1lBQ2pELENBQUM7WUFDREYsYUFBYSxHQUFHLElBQUk7WUFDcEIsS0FBSztRQUNQLENBQUMsQ0FBQyxLQUFLLEVBQUVNLEdBQUcsRUFBRSxDQUFDO1lBQ2JiLENBQUMsRUFBRSxPQUFPLEVBQUVhLEdBQUcsWUFBWUMsS0FBSyxHQUFHRCxHQUFHLENBQUNFLE9BQU8sR0FBR0YsR0FBRztRQUN0RCxDQUFDO0lBQ0gsQ0FBQztJQUNELEVBQUUsR0FBR04sYUFBYSxFQUFFLENBQUM7UUFDbkIsS0FBSyxDQUFDLEdBQUcsQ0FBQ08sS0FBSyxFQUFFLG1DQUFtQyxFQUFFVixRQUFRLENBQUMsbURBQW1ELEVBQUVBLFFBQVEsQ0FBQyxFQUFFO0lBQ2pJLENBQUM7SUFFRCxFQUE4RCxBQUE5RCw0REFBOEQ7SUFDOUQsS0FBSyxDQUFDWSxjQUFjLEdBQWtDTCxPQUFPLENBQUNOLGtCQUFrQjtJQUVoRixNQUFNLENBQUNXLGNBQWMsQ0FBQ0MsT0FBTyxJQUFJRCxjQUFjO0FBQ2pELENBQUM7UUFqQ1lkLFlBQVksR0FBWkEsWUFBWSJ9